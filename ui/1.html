<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="1.css">
  <script src="1.js" type="module"></script>
  <title>地球Online看板</title>
</head>

<body>
  <!-- 顶部导航区 -->
  <header class="header">
    <div class="logo">地球Online</div>
    <div class="user-info">
      <span class="time">当前时间: 2025-04-04 11:19:08</span>
      <span class="username">玩家名称: 地球玩家001</span>
    </div>
  </header>

  <!-- 主要内容区 -->
  <div class="main-content">
    <!-- 左侧数据展示区 -->
    <main class="main">
      <div class="data-display">
        <div class="data-columns">
          <div class="category physiological">
            <h3>生理需求 🍽️</h3>
            <div class="metrics">
              <div class="metric" data-type="hunger">
                <span class="label">饱腹度 🍚</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="thirst">
                <span class="label">口渴度 💧</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="toilet">
                <span class="label">如厕需求 🚽</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="social">
                <span class="label">社交需求 👥</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="fatigue">
                <span class="label">疲惫度 😴</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="hygiene">
                <span class="label">卫生状况 🧼</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
            </div>
          </div>

          <div class="category mental">
            <h3>身心状况 🧠</h3>
            <div class="metrics">
              <div class="metric" data-type="fitness">
                <span class="label">瘦身指数 💪</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="happiness">
                <span class="label">幸福感 😊</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="achievement">
                <span class="label">成就感 🏆</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="eyeFatigue">
                <span class="label">视疲劳 👀</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="sleepQuality">
                <span class="label">睡眠质量 🌙</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="heartHealth">
                <span class="label">心脏健康度 ❤️</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
            </div>
          </div>

          <div class="category ability">
            <h3>能力属性 ⚡</h3>
            <div class="metrics">
              <div class="metric" data-type="muscle">
                <span class="label">肌肉强度 💪</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="agility">
                <span class="label">敏捷度 🏃</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="resistance">
                <span class="label">抗击打能力 🛡️</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="timeControl">
                <span class="label">时间掌控度 ⏰</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="creativity">
                <span class="label">创造力 🎨</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
              <div class="metric" data-type="security">
                <span class="label">安全感 🔒</span>
                <progress value="0" max="100"></progress>
                <span class="value">0%</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- 右侧分析与设置区域 -->
    <section class="right-sidebar">
      <!-- 分析与设置区域 -->
      <section class="analysis-settings">
        <!-- AI状态分析面板 -->
        <div class="panel ai-analysis">
          <h2>AI状态分析</h2>
          <button class="gradient-button">AI分析当前状态</button>
          <button class="gradient-button" onclick="window.location.href='/thresholds'">设置阈值</button>
          <!-- <button>放大查看</button> -->
          <div class="ai-loading-indicator" id="aiLoadingIndicator" style="display: none;">
            <div class="spinner"></div>
            <p>AI分析中，请稍候...</p>
          </div>
          <div class="ai-result" id="aiResult">
            <p class="placeholder-text">点击"AI分析当前状态"按钮获取分析结果</p>
          </div>
        </div>
  </div>
  <!-- 阈值提醒设置面板 -->
  <!-- <div class="panel threshold-settings">
          <h2>阈值提醒设置</h2>
          <button class="gradient-button">设置阈值提醒</button>-->
          <!-- <button>放大查看</button> -->
  
  </div> 
  </section>

  <!-- AI分析结果输出框 -->
  <!-- <div class="ai-output-container">
        <h2>AI分析结果</h2>
        <div class="ai-output-content" id="aiOutputContent">
          <div class="ai-loading-indicator" id="aiLoadingIndicator" style="display: none;">
            <div class="spinner"></div>
            <p>AI分析中，请稍候...</p>
          </div>
          <div class="ai-result" id="aiResult">
            <p class="placeholder-text">点击"AI分析当前状态"按钮获取分析结果</p>
          </div>
        </div>
      </div> -->
  </section>
  </div>

  <!-- 底部功能区 -->
  <footer class="footer">
    <button>设置</button>
    <button onclick="window.location.href='/event'">事件</button>
    <button id="syncFromExampleBtn">健康数据同步</button>
    <button onclick="window.location.href='/trends'">趋势图</button>
    <button onclick="window.location.href='/weekly-report'">周报</button>
    <button onclick="window.location.href='/monthly-report'">月报</button>
    <button class="emphasize-button">重置(下次打开生效)</button>
    
    <div class="footer">
      <p>© 2025 地球Online看板 - 保持健康，享受生活</p>
  </div>
  </footer>

  <!-- 系统日志区域 -->
  <div class="log">
    <h2>系统日志</h2>
    <pre id="systemLog">已加载历史数据记录，共164个时间点</pre>
  </div>

  <!-- 语音识别状态指示器 -->
  <!-- <div id="voiceStatus" class="voice-status">
    <div class="voice-wave"></div>
    <span>正在录音...</span>
  </div> -->

  <!-- 同步示例数据的结果提示框 -->
  <div id="syncResultModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 id="modalTitle">数据同步结果</h2>
      <p id="modalMessage"></p>
    </div>
  </div>

  <style>
    /* 模态框样式 */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
    }
    
    .modal-content {
      background: linear-gradient(135deg, #1a2a6c, #b21f1f);
      margin: 15% auto;
      padding: 20px;
      border-radius: 10px;
      width: 50%;
      max-width: 500px;
      color: white;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      text-align: center;
    }
    
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    
    .close:hover,
    .close:focus {
      color: white;
      text-decoration: none;
    }
  </style>

  <script>
    // 添加同步示例数据的功能
    document.addEventListener('DOMContentLoaded', function() {
      const syncBtn = document.getElementById('syncFromExampleBtn');
      const modal = document.getElementById('syncResultModal');
      const modalTitle = document.getElementById('modalTitle');
      const modalMessage = document.getElementById('modalMessage');
      const closeBtn = document.querySelector('.close');
      
      // 同步按钮点击事件
      syncBtn.addEventListener('click', function() {
        // 显示正在加载
        modalTitle.textContent = '正在同步';
        modalMessage.textContent = '正在从示例数据同步，请稍候...';
        modal.style.display = 'block';
        
        fetch('/api/health/sync', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            action: 'sync_from_example'
          })
        })
        .then(response => response.json())
        .then(data => {
          if (data.status === 'success') {
            modalTitle.textContent = '同步成功';
            modalMessage.textContent = data.message || '示例数据同步成功！';
            modal.style.display = 'block';
            
            // 更新页面上的健康数据
            updateHealthDataUI(data.data);
          } else {
            modalTitle.textContent = '同步失败';
            modalMessage.textContent = data.message || '同步过程中发生错误';
            modal.style.display = 'block';
          }
        })
        .catch(error => {
          modalTitle.textContent = '同步错误';
          modalMessage.textContent = '发生错误: ' + error.message;
          modal.style.display = 'block';
        });
      });
      
      // 关闭模态框
      closeBtn.addEventListener('click', function() {
        modal.style.display = 'none';
      });
      
      // 点击模态框外部关闭
      window.addEventListener('click', function(event) {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      });
      
      // 更新UI上的健康数据
      function updateHealthDataUI(healthData) {
        // 遍历所有指标并更新UI
        const updateCategory = (category) => {
          for (const [key, value] of Object.entries(healthData[category])) {
            const metricElement = document.querySelector(`.metric[data-type="${key}"]`);
            if (metricElement) {
              const progressBar = metricElement.querySelector('progress');
              const valueSpan = metricElement.querySelector('.value');
              
              if (progressBar && valueSpan) {
                progressBar.value = value;
                valueSpan.textContent = `${Math.round(value)}%`;
              }
            }
          }
        };
        
        // 更新各类别数据
        updateCategory('physiological');
        updateCategory('mental');
        updateCategory('ability');
      }
    });
  </script>

</body>

</html>